name: Testing dotCLI
on: 
  workflow_dispatch:

jobs:
  dotcli-test:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout dotCLI
        uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 16.x

      - name: Install dotCLI
        run: npm install -g @dotcms/dotcli

      - name: Check dotCLI version
        run: dotcli --version

      - name: Configure dotCLI
        run: ../scripts/dotcli-config.sh
        
      # - name: Run dotCLI commands
      #   run: |
      #     echo "::group::dotcli commands"
      #     dotcli config
      #     expect "Enter the key/name"
      #     # dotcli login --username ${{ secrets.DOTCMS_USERNAME }} --password ${{ secrets.DOTCMS_PASSWORD }}
      #     echo "::endgroup::"